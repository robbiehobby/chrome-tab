"use strict";var g={data:"",style:"cover",size:"100",opacity:"100",hue:"0",grayscale:"0",blur:"0"},p={protectPinned:!0,protectGroups:!0},o={color:"",image:g,tab:p};var u=n=>{n==="close-tab"&&chrome.windows.getCurrent({populate:!0},async r=>{var s;if(!r.tabs||r.tabs.length===0)return;let t=r.tabs.find(e=>e.active);if(!(t!=null&&t.id))return;let{settings:a}=await chrome.storage.local.get(["settings"]),{protectPinned:i,protectGroups:c}=a.tab;if(i&&t.pinned||c&&t.groupId!==-1)return;let d=r.tabs.filter(e=>!e.pinned&&e.groupId===-1&&e.id!==t.id);try{if(!d.length){if((s=t.url)!=null&&s.match(/^\w+:\/\/newtab\//))return;await chrome.tabs.create({})}await chrome.tabs.remove(t.id)}catch(e){}})};chrome.commands.onCommand.addListener(u);chrome.runtime.onInstalled.addListener(()=>{chrome.storage.local.set({settings:o})});
