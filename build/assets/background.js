import{d as c}from"./chrome.js";async function i(){return(await chrome.storage.local.get(["page"])).page||c}chrome.tabs.onCreated.addListener(async t=>{(await i()).close.empty||(await chrome.tabs.query({url:"chrome://newtab/"})).forEach(a=>{a.id&&a.id!==t.id&&chrome.tabs.remove(a.id)})});async function d(){const t=await chrome.windows.getCurrent({populate:!0});if(!t.tabs||t.tabs.length===0)return;const e=t.tabs.find(r=>r.active);if(!e||!e.id)return;const a=await i(),{pinned:s,grouped:o}=a.close;if(!(s&&e.pinned||o&&e.groupId!==-1))try{t.tabs.filter(n=>!n.pinned&&n.groupId===-1&&n.id!==e.id).length||await chrome.tabs.create({}),await chrome.tabs.remove(e.id)}catch{}}chrome.commands.onCommand.addListener(t=>{t==="close"&&d()});
