import{d}from"./chrome.js";chrome.commands.onCommand.addListener(async i=>{var r;if(i!=="close-tab")return;const e=await chrome.windows.getCurrent({populate:!0});if(!e.tabs||e.tabs.length===0)return;const t=e.tabs.find(a=>a.active);if(!t||!t.id)return;const o=(await chrome.storage.local.get(["page"])).page||d,{pinned:s,grouped:c}=o.closeTab;if(!(s&&t.pinned||c&&t.groupId!==-1))try{if(!e.tabs.filter(n=>!n.pinned&&n.groupId===-1&&n.id!==t.id).length){if((r=t.url)!=null&&r.match(/^\w+:\/\/newtab\//))return;await chrome.tabs.create({})}await chrome.tabs.remove(t.id)}catch{}});
