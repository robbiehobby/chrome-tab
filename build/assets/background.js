import{d}from"./chrome.js";chrome.commands.onCommand.addListener(async i=>{var n;if(i!=="close")return;const e=await chrome.windows.getCurrent({populate:!0});if(!e.tabs||e.tabs.length===0)return;const t=e.tabs.find(r=>r.active);if(!t||!t.id)return;const o=(await chrome.storage.local.get(["page"])).page||d,{pinned:s,grouped:c}=o.close;if(!(s&&t.pinned||c&&t.groupId!==-1))try{if(!e.tabs.filter(a=>!a.pinned&&a.groupId===-1&&a.id!==t.id).length){if((n=t.url)!=null&&n.match(/^\w+:\/\/newtab\//))return;await chrome.tabs.create({})}await chrome.tabs.remove(t.id)}catch{}});
